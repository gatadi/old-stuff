<!doctype html>
<html>
	<head>
		<script src="jquery.js" type="text/javascript"></script>
		<script src="rest.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="empSearch">
			<form id="empSearchForm">
				<label for="empId">Employee ID:</label>
				<input type="text" id="empId">
				<input type="submit" value="Find By XML">
				<input type="button" value="Find By Json">
			</form>
		</div>
		<div id="results"></div>
		
		<script type="text/javascript">
			$(function(){
				
				$('#empSearchForm').submit(function(evt){
					evt.preventDefault();
					var empId = $('#empId').val(),
					    url = '/advjs/rest/employee/' + empId;
					RestClient.retrieveXml(url, "GET", handleXmlRequest);
				});
				
				function handleXmlRequest(results){
					var firstName = $(results).find('firstName').text(),
					    lastName = $(results).find('lastName').text(),
					    salary = $(results).find('salary').text();
					
					$('#results').append('<p>' + firstName + ' ' + lastName + ' (' + salary + ') </p>');
				}
				
				$('#empSearchForm input[type="button"]').click(function(evt){
					evt.preventDefault();
					var empId = $('#empId').val(),
					    url = '/advjs/rest/employee/json/' + empId;
					RestClient.retrieveJson(url, "GET", handleJsonRequest);
				});
				
				function handleJsonRequest(results){
					var firstName = results.emp.firstName,
					    lastName  = results.emp.lastName,
					    salary    = results.emp.salary;
					
					$('#results').append('<p>' + firstName + ' ' + lastName + ' (' + salary + ') </p>');
				}
				
			});
		
		</script>
		
	</body>
</html>